<div class="container mt-5 px-4">
    <form [formGroup]="checkoutFormGroup" (ngSubmit)="onSubmit()" #f="ngForm" ngForm="f">
        <div class="mb-4">
            <div class="row">
                <div class="col-md-6">
                    <!-- customer form group -->
                    <div class="mt-4 mb-4">    
                        <div formGroupName="customer" class="form-area customer">
                        <h3>Checkout</h3>
                            <div class="row">
                                <div class="col-md-3">
                                    <label>First Name</label>
                                </div>
                      
                                <div class="col-md-9">
                                    <div class="input-space">
                                        <input formControlName="firstName" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"> 
                                    <label>Last Name</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-space">
                                        <input formControlName="lastName" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"> 
                                    <label>Email</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-space">
                                        <input formControlName="email" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <hr>
          
                    <div class="mt-3 mb-4">
                    <!-- shipping Address -->       
                        <div formGroupName="shippingAddress" class="form-area shippingAddress">
                        <h3>Shipping Address</h3>               
                            <div class="row">
                                <div class="col-md-3"> 
                                    <label>Country</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-space">
                                        <select formControlName="country" (change)="getStates('shippingAddress')">
                                            <option *ngFor="let country of allCountries" [ngValue]="country">
                                                {{ country }}
                                            </option>
                                  
                                            <div class="invalid-feedback" *ngIf="isSubmitted && country?.invalid">
                                                <sup>*</sup> Select a country
                                            </div>
                                        </select>
                                    </div>
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col-md-3"> 
                                    <label>Street</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-space">
                                        <input formControlName="street" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"> 
                                    <label>City</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-space">
                                        <select formControlName="city">
                                            <option *ngFor="let city of allCities" [ngValue]="city">
                                                {{ city }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-3"> 
                                    <label>State</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-space">
                                        <select formControlName="state" (change)="getCities('shippingAddress')">
                                            <option *ngFor="let state of allStates" [ngValue]="state">
                                                {{ state }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        
                            <div class="row">
                                <div class="col-md-3"> 
                                    <label>Zip Code</label>
                                </div>
                                <div class="col-md-3">
                                    <div class="input-space">
                                        <input formControlName="zipCode" type="text">
                                    </div>
                                </div>
                            </div>
                        </div> <hr>
                                  
                    <!-- Billing Address -->
                    <div formGroupName="billingAddress" class="form-area billingAddress">
                    <h3 class="Bheader">Billing Address</h3>  
                        
                        <!-- Add check box to copy shipping to billing -->
                        <div class="input-space">
                            <label class="au-checkbox">
                                <input type="checkbox" (change)="copyShippingAddressToBillingAddress($event)">
                                <span class="au-checkmark ms-2"> </span>  Billing Address same as Shipping Address
                            </label>
                        </div> <br>

                        <div class="row">
                            <div class="col-md-3"> 
                                <label>Country</label>
                            </div>
                            <div class="col-md-9">
                                <div class="input-space">
                                    <select formControlName="country" (change)="getStates('billingAddress')">
                                        <option *ngFor="let country of allCountries" [ngValue]="country">
                                            {{ country }}
                                        </option>
                                    </select>
                                    <div class="invalid-feedback" *ngIf="isSubmitted && country?.invalid">
                                        <sup>*</sup> Select a country
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                        <div class="col-md-3"> 
                            <label>Street</label>
                        </div>
                        <div class="col-md-9">
                            <div class="input-space">
                                <input formControlName="street" type="text">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3"> 
                            <label>City</label>
                        </div>
                        <div class="col-md-9">
                            <div class="input-space">
                                <select formControlName="city">
                                    <option *ngFor="let city of allCities" [ngValue]="city">
                                        {{ city }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3"> <label>State</label></div>
                        <div class="col-md-9">
                            <div class="input-space">
                                <select formControlName="state" (change)="getCities('billingAddress')">
                                    <option *ngFor="let state of allStates" [ngValue]="state">
                                        {{ state }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3"> <label>Zip Code</label></div>
                        <div class="col-md-3">
                            <div class="input-space">
                                <input formControlName="zipCode" type="text">
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                </div>
        
                <!-- Credit Card -->
                <div class="col-md-4 mt-4 c">
                    <div formGroupName="creditCard" class="form-area creditCard">
                        <div class="col-md-9">
                        <h6 class="text-uppercase">Payment details</h6> 
                            <div class="col-mt-9 md-5">
                                <div class="inputbox mt-3">
                                    <input type="text" formControlName="nameOnCard" class="form-control" required="required">
                                    <span>Name on card</span>
                                </div>
                            </div>
      
                            <div class="col-mt-9 md-5">
                                <div class="inputbox mt-3 mr-2"> 
                                    <input type="text" formControlName="cardNumber" class="form-control" required="required">
                                    <span>Card Number</span>
                                </div>
                            </div>
          
                            <div class="d-flex flex-row">
                                <div class="col-md-6"> 
                                    <div class="inputbox mt-2 mr-2">
                                        <input type="text" formControlName="securityCode" class="form-control" required="required">
                                        <span>Security Code</span>
                                    </div>
                                </div>
 
                                <div class="col-md-6 ms-4"> 
                                    <span>Exp Month</span>
                                    <div class="input-space">
                                        <select formControlName="expirationMonth">
                                            <option *ngFor="let month of creditCardMonths">
                                                {{ month }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                     
                                <div class="col-md-6 ms-1"> 
                                    <span>Exp Year</span>
                                    <div class="input-space">
                                        <select formControlName="expirationYear" (change)="handleMonthsAndYears()">
                                            <option *ngFor="let year of creditCardYears">
                                                {{ year }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>    
                        </div>
                    </div> <br> <br> <br>
                        
                    <!-- Order details -->
                    <div class="card card-blue p-4 text-white mb-3">
                        <div class="form-area">
                            <h3 class="Sheader">Summary</h3> 
                            <p> <strong> Total Quantity: </strong>{{ total }}</p>
                            <p> <strong> Shipping: </strong> FREE  </p>
                            <p> <strong> Total Price: </strong> ${{ totalPrice | number }}</p>
                        </div>
                    </div> <br>
                                                                              
                    <!-- submit button-->
                    <div class="mt-4 mb-4 d-flex"> 
                        <button class="btn btn-primary px-3" routerLink="/cart">Go back to cart </button>
                        <button class="btn btn-success px-3">Pay $ {{ totalPrice | number }}</button> 
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
 